<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Console - KLITIK CRAFT</title>
<style>
body, html{margin:0;padding:0;height:100%;font-family:Consolas,monospace;background:#0a0a0a;color:#fff;overflow:hidden}
:root{--neon-purple:#9b59b6;--neon-cyan:#00ffff;--btn-bg:#333;--btn-hover:#555;}
header{background:linear-gradient(90deg, var(--neon-purple), var(--neon-cyan));padding:12px;font-size:20px;font-weight:bold;text-align:center}
#terminal{background:#111;color:#0f0;padding:10px;height:70%;overflow-y:auto;font-size:14px;border-top:2px solid var(--neon-purple);}
#cmdInput{width:100%;padding:10px;background:#222;border:none;color:#0f0;font-size:14px;outline:none;border-top:2px solid var(--neon-cyan);}
#buttons{display:flex;gap:8px;padding:10px;background:#111;border-top:2px solid var(--neon-purple);}
.btn{padding:8px 12px;background:var(--btn-bg);border:none;color:#fff;border-radius:6px;cursor:pointer;}
.btn:hover{background:var(--btn-hover);}
#serverStatus{font-weight:bold;}
</style>
</head>
<body>

<header>KLITIK CRAFT CONSOLE</header>

<div id="terminal"></div>

<input type="text" id="cmdInput" placeholder="Ketik command di sini..." autofocus>

<div id="buttons">
  <button class="btn" onclick="toggleServer()">Matikan / Online-kan Server Web</button>
  <span id="serverStatus">Status: ONLINE</span>
</div>

<script>
// ----------------- UTILITY -----------------
const terminal = document.getElementById("terminal");
let serverOnline = true;

// Ambil logs dari localStorage
function loadLogs(){
  const logs = JSON.parse(localStorage.getItem("consoleLogs")||"[]");
  terminal.innerHTML = logs.map(l=>`> ${l}`).join("<br>");
  terminal.scrollTop = terminal.scrollHeight;
}

// Tambah log baru
function addLog(text){
  let logs = JSON.parse(localStorage.getItem("consoleLogs")||"[]");
  logs.push(text);
  localStorage.setItem("consoleLogs", JSON.stringify(logs));
  loadLogs();
}

// ----------------- SERVER BUTTON -----------------
function toggleServer(){
  const role = localStorage.getItem("role")||"user";
  if(role!=="developer"){ addLog("Hanya developer yang bisa matikan/online-kan server"); return;}
  serverOnline = !serverOnline;
  document.getElementById("serverStatus").innerText = "Status: "+(serverOnline?"ONLINE":"MAINTENANCE");
  addLog(`Server Web ${serverOnline?"diaktifkan":"dimatikan oleh developer"}`);
  // Matikan dashboard
  localStorage.setItem("serverStatus", serverOnline?"online":"maintenance");
}

// ----------------- COMMAND TERMINAL -----------------
const input = document.getElementById("cmdInput");
input.addEventListener("keydown", e=>{
  if(e.key==="Enter"){
    const role = localStorage.getItem("role")||"user";
    const user = localStorage.getItem("mcName")||"USER";
    const val = input.value.trim();
    if(!val) return;
    addLog(`> ${val}`);
    if(val.startsWith("/give rank")){
      if(role!=="developer" && role!=="owner"){ addLog("Hanya owner/developer bisa memberi rank");}
      else{
        const target = val.replace("/give rank","").trim();
        if(target) addLog(`Rank OWNER diberikan ke ${target} oleh ${user}`);
        else addLog("Format: /give rank {username}");
      }
    }else if(val==="/clear"){
      localStorage.setItem("consoleLogs","[]");
      terminal.innerHTML="";
    }else if(val==="/help"){
      addLog("Command Tersedia:");
      addLog("/give rank {username} - Berikan rank OWNER");
      addLog("/clear - Bersihkan terminal");
      addLog("/help - Tampilkan command");
      addLog("/status - Tampilkan status server web");
    }else if(val==="/status"){
      addLog("Server Web: "+(serverOnline?"ONLINE":"MAINTENANCE"));
    }else{
      addLog("Command tidak dikenali. Ketik /help untuk bantuan.");
    }
    input.value="";
  }
});

// ----------------- LOAD LOGS -----------------
loadLogs();

// ----------------- AUTO LOG DARI DASHBOARD -----------------
setInterval(()=>{ loadLogs(); },2000);

// ----------------- CEK SERVER STATUS DASHBOARD -----------------
setInterval(()=>{
  const status = localStorage.getItem("serverStatus")||"online";
  if(status==="maintenance") terminal.style.background="#220022";
  else terminal.style.background="#111";
},1000);

</script>

</body>
</html>
